import{p as b,z as Fe,A as J,B as Be,d as w,C as Ge,o as h,c as _,g as B,h as m,D as st,E as C,n as se,G as De,H as nt,F as N,r as K,I as ne,m as v,J as we,K as rt,L as ot,M as at,N as it,P as _e,a as $,t as k,O as me,Q as We,R as F,l as E,T as G,U as re,_ as x,V as ve,w as ct,W as lt,X as je,s as ye,Y as Me,Z as ut,q as Ve,$ as He,a0 as dt,e as ht,f as Ke,a1 as pt,a2 as ft,a3 as gt,a4 as _t,a5 as Ee,a6 as mt}from"./index-e707bf7d.js";import{s as vt}from"./currency-70b2d894.js";import{E as yt}from"./el-input-593ae110.js";import{_ as qe}from"./CardLineImageComponent.vue_vue_type_script_setup_true_lang-6a0b6b34.js";import{_ as $t,a as kt,Q as St}from"./ProductPrice.vue_vue_type_script_setup_true_lang-c7010594.js";import"./typescript-acce6f1e.js";import"./empty-420a0689.js";const bt=(t,e=0)=>{if(e===0)return t;const s=b(!1);let n=0;const r=()=>{n&&clearTimeout(n),n=window.setTimeout(()=>{s.value=t.value},e)};return Fe(r),J(()=>t.value,o=>{o?r():s.value=o}),s},wt=Be({animated:{type:Boolean,default:!1},count:{type:Number,default:1},rows:{type:Number,default:3},loading:{type:Boolean,default:!0},throttle:{type:Number}}),Mt=Be({variant:{type:String,values:["circle","rect","h1","h3","text","caption","p","image","button"],default:"text"}}),Et=w({name:"ElSkeletonItem"}),It=w({...Et,props:Mt,setup(t){const e=Ge("skeleton");return(s,n)=>(h(),_("div",{class:se([m(e).e("item"),m(e).e(s.variant)])},[s.variant==="image"?(h(),B(m(st),{key:0})):C("v-if",!0)],2))}});var oe=De(It,[["__file","/home/runner/work/element-plus/element-plus/packages/components/skeleton/src/skeleton-item.vue"]]);const Ct=w({name:"ElSkeleton"}),Lt=w({...Ct,props:wt,setup(t,{expose:e}){const s=t,n=Ge("skeleton"),r=bt(nt(s,"loading"),s.throttle);return e({uiLoading:r}),(o,a)=>m(r)?(h(),_("div",we({key:0,class:[m(n).b(),m(n).is("animated",o.animated)]},o.$attrs),[(h(!0),_(N,null,K(o.count,i=>(h(),_(N,{key:i},[o.loading?ne(o.$slots,"template",{key:i},()=>[v(oe,{class:se(m(n).is("first")),variant:"p"},null,8,["class"]),(h(!0),_(N,null,K(o.rows,c=>(h(),B(oe,{key:c,class:se([m(n).e("paragraph"),m(n).is("last",c===o.rows&&o.rows>1)]),variant:"p"},null,8,["class"]))),128))]):C("v-if",!0)],64))),128))],16)):ne(o.$slots,"default",rt(we({key:1},o.$attrs)))}});var At=De(Lt,[["__file","/home/runner/work/element-plus/element-plus/packages/components/skeleton/src/skeleton.vue"]]);const Pt=ot(At,{SkeletonItem:oe}),Rt=at(oe),Tt=(t,e)=>{const s=it();return()=>{const r={product:t.product,quantity:e.value};_e.ping({action:"action",todo:"cart add",payload:r}),s.add(r)}},Ot={class:"card-line"},Nt={class:"card-line__left"},Ft={class:"card-line__center"},Bt={class:"card-line__center-availability"},Gt={class:"card-line__center-availability-header-text"},Dt={class:"card-line__center-price"},Wt={class:"card-line__center-price-header-text"},jt=w({__name:"CardLineComponent",props:{product:{},filterHeaders:{}},setup(t){const e=t,s=b(1),n=Tt(e,s),r=o=>s.value=o;return(o,a)=>{var i;return h(),_("article",Ot,[$("div",Nt,[v(qe,{img:((i=o.product)==null?void 0:i.image)??"",alt:o.product.description[0]},null,8,["img","alt"])]),$("div",Ft,[v(m(ts),{product:o.product,"filter-headers":o.filterHeaders},null,8,["product","filter-headers"]),$("div",Bt,[$("h3",Gt,k(o.$t("card.availability"))+": ",1),v($t,{inStock:o.product.stock_data,unit:o.product.pcs},null,8,["inStock","unit"])]),$("div",Dt,[$("h3",Wt,k(o.$t("card.price"))+": ",1),v(kt,{productPriceArray:o.product.prices},null,8,["productPriceArray"])])]),v(m(St),{quantityOfProduct:s.value,onChangeQuantityOfProduct:r,onAddToCart:m(n)},null,8,["quantityOfProduct","onAddToCart"])])}}}),Vt=w({props:{product:{required:!0,type:Object},filterHeaders:{required:!0,type:Array}},setup(t){const e=me(),s=We(),n=F(()=>t.product.description.reduce((o,a,i)=>i===0||a===void 0?o:`${o+a} `,""));return{storeGoods:s,sumOfAllDescription:n,addGoodsToStorage:()=>{s.add({product:t.product,filterHeaders:t.filterHeaders}),_e.ping({action:"go to page",to:e.resolve({name:"goods",params:{code:t.product.id}}).fullPath})}}}}),Ht="/radiomag/images/pdf.svg",Kt={class:"card-line__center-description"},qt={class:"card-line__center-description-small"},zt={class:"card-line__center-description-small-paragraph"},xt={class:"card-line__center-description-small-paragraph_light-color"},Ut={key:0,class:"card-line__center-description-small-paragraph"},Qt={class:"card-line__center-description-small-paragraph_light-color"},Jt={class:"card-line__center-description-main-text"},Yt={key:0,class:"card-line__center-description-tech-info"},Xt=$("img",{class:"card-line__center-description-tech-info-icon",src:Ht,alt:"file specification"},null,-1),Zt=["href"];function es(t,e,s,n,r,o){const a=E("RouterLink");return h(),_("div",Kt,[v(a,{class:"card-line__center-description-header-text",to:{name:"goods",params:{code:t.product.id}},onClick:t.addGoodsToStorage},{default:G(()=>[$("h3",null,k(t.product.description[0]),1)]),_:1},8,["to","onClick"]),$("div",qt,[v(a,{class:"common-link",to:{name:"goods",params:{code:t.product.id}},onClick:t.addGoodsToStorage},{default:G(()=>[$("p",zt,[re(k(t.$t("card.codeGoods"))+": ",1),$("span",xt,k(t.product.id),1)])]),_:1},8,["to","onClick"]),t.product.description[1]?(h(),_("p",Ut,[re(k(t.$t("card.production"))+": ",1),$("span",Qt,k(t.product.description[1]),1)])):C("",!0)]),$("p",Jt,k(t.sumOfAllDescription),1),t.product.datasheet_link_data?(h(),_("p",Yt,[Xt,$("a",{class:"card-line__center-description-tech-info-link",target:"_blank",href:"https://www.rcscomponents.kiev.ua/"+t.product.datasheet_link_data},k(t.$t("card.technicalInformation")),9,Zt)])):C("",!0)])}const ts=x(Vt,[["render",es]]),ss=["name","id"],ns=["for"],rs=w({__name:"FilterItemComponent",props:{filterIndex:{},header:{},item:{}},setup(t){const e=b(!1),s=ve();return J(()=>s.resetAll,n=>n===!0&&(e.value=!1)),(n,r)=>(h(),_(N,null,[ct($("input",{class:"filter__item-input",type:"checkbox",name:n.item.title,id:`${n.header}_${n.item.title}`,"onUpdate:modelValue":r[0]||(r[0]=o=>e.value=o),onInput:r[1]||(r[1]=o=>m(s).setSearchParams({filterIndex:n.filterIndex+1,filterItemValue:n.item.title}))},null,40,ss),[[lt,e.value]]),$("label",{class:"filter__item-label",for:`${n.header}_${n.item.title}`},k(n.item.title)+" ("+k(n.item.qty)+") ",9,ns)],64))}}),os={class:"filter"},as={class:"filter__header-text"},is=w({__name:"FilterComponent",props:{header:{},filterIndex:{},data:{}},setup(t){const e=ve(),s=b();return J(()=>e.resetAll,n=>n===!0&&s.value&&(s.value.scrollTop=0)),(n,r)=>(h(),_("div",os,[$("h2",as,k(n.header),1),$("ul",{class:"filter__container",ref_key:"list",ref:s},[(h(!0),_(N,null,K(n.data,(o,a)=>(h(),_("li",{class:"filter__item",key:a},[v(m(rs),{header:n.header,"filter-index":n.filterIndex,item:o},null,8,["header","filter-index","item"])]))),128))],512)]))}}),U=je("group",()=>{const t=b({}),e=b(""),s=F(()=>Object.keys(t.value).length),n=b(!0),r=b(""),o=b(),a=ye(),i=g=>t.value[g],c=async g=>{const[S,M]=await Me.groupName(g);if(!S)return e.value=M},l=async g=>{const[S,M]=await Me.group(g);return S?r.value=a.t("group.error.load"):(vt(M),t.value[g]=M)};return{data:t,groupName:e,length:s,isLoading:n,isError:r,getData:i,load:async g=>{r.value="",n.value=!0,await Promise.all([l(g),c(g)]),n.value=!1},groupWorker:o,createWorker:()=>o.value=new Worker("/js/groupWorker.js"),terminateWorker:()=>{o.value&&(o.value.terminate(),o.value=void 0)}}}),cs=t=>{var s;if(Object.keys(t).length===0)return;(s=U().groupWorker)==null||s.postMessage({type:"apply_filters",data:JSON.parse(JSON.stringify(t))})},ze=()=>{var e;(e=U().groupWorker)==null||e.postMessage({type:"reset"})},le=[10,30,50,100,150,200,250],Ie=ut("pagination",le[1]),L=je("pagination",()=>{const t=b(0),e=b(1),s=b(10),n=b(Ie.value||le[1]),r=y=>{n.value=y,Ie.value=y},o=F(()=>Math.ceil(t.value/n.value)),a=F(()=>e.value===1),i=F(()=>e.value===o.value),c=y=>y>0?e.value=y:e.value=1,l=()=>e.value=1,u=F(()=>{let y=1;const A=[],T=s.value/2;if(o.value<s.value){for(let P=1;P<=o.value&&(A.push(y),y!==o.value);P++)y+=1;return c(1),A}if(e.value-T>0&&(y=e.value-T),e.value+T>o.value){const P=o.value-s.value+1;return Array(s.value).fill(0).map((ke,X)=>P+X)}for(let P=1;P<=s.value&&(A.push(y),y!==o.value);P++)y+=1;return A}),d=F(()=>{const y=e.value*n.value;return{start:y-n.value,end:y}});return{length:t,onPage:n,quantity:le,activePage:e,numberOfButtons:o,isLeftButtonDisabled:a,isRightButtonDisabled:i,whichButtonsDisplayed:u,getRange:d,setOnPage:r,setLength:y=>t.value=y,setActive:c,setDefault:l,moveLeft:()=>e.value-=1,moveRight:()=>e.value+=1,toFirst:()=>e.value=1,toLast:()=>e.value=o.value}}),ls={timeout:5e3},us=t=>{const e=Ve(),s=L(),n=ye(),r=()=>{e.warning(n.t("groupSearch.notificationNotFound"),ls)};return{searchShow:i=>{if(i.length===0){r();return}t.value=i.sort((c,l)=>Number(l.total_stock||0)-Number(c.total_stock||0)),s.setActive(1)},searchReset:()=>{ze()}}},ds=t=>{const e=He(),s=me(),n=L(),r=b(n.onPage);J(()=>n.activePage,o=>{const a=e.name,i=e.params.id;a&&i&&s.replace({name:a,params:{id:i},query:{page:o}})}),J(()=>t.value,o=>{if(o==="CardTable")return r.value=n.onPage,n.setOnPage(n.length);n.setOnPage(r.value)})},hs=t=>{const e=L();return{toShow:F(()=>{const{start:n,end:r}=e.getRange;return t.value.slice(n,r)})}},ps=t=>({allDataToShowLength:F(()=>t.value.length)}),fs=t=>{var i;const e=b([]),s=b([]),n=U(),r={headers:e,filters:s},o=(i=n.data[t])==null?void 0:i.descriptions_titles;if(!o)return r;const a=c=>{const l=o[c.title];return Array.isArray(l)?{qty:0,title:""}:{qty:c.qty,title:l.value}};return e.value=Object.values(n.data[t].column_headers.product_descriptions).slice(1),s.value=n.data[t].filters.filter(c=>c.length).map(c=>c.map(a)),{headers:e,filters:s}},gs=(t,e)=>{const s=U();if(s.createWorker(),s.groupWorker===void 0)return;s.groupWorker.onmessage=r=>{const{type:o,data:a}=r.data;o==="return_sum_all_product_description"&&(e.value=a)};const n=JSON.parse(JSON.stringify(s.data[t]));s.groupWorker.postMessage({type:"sum_all_product_description",data:n})},_s=()=>{const t=b([]),e=b([]),s=b([]),n=He(),r=U(),o=L(),a=dt(),i=n.params.id;return ht(async()=>{var f;if(i===void 0)return;await r.load(i);const c=Number(n.query.page);1<c&&o.setActive(c),window.document.title=`${r.groupName}`;const l={name:r.groupName,path:n.fullPath};(f=n.meta.breadcrumbs)==null||f.set(l),a.updateOne(n.fullPath,l);const{headers:u,filters:d}=fs(i);e.value=u.value,s.value=d.value,gs(i,t)}),{allDataToShow:t,filterHeaders:e,allFilters:s}},ms=()=>{const t=U(),e=L();Ke(()=>{e.setDefault(),t.terminateWorker()})},vs=t=>({isEmpty:F(()=>t.value===0)}),ys=t=>{const e=b(t[0]);return{view:e,toggleView:n=>{e.value=t[Number(n)]}}};let Z;const $s={threshold:.1},ks=t=>{t.forEach(e=>{.1<e.intersectionRatio&&e.target.classList.add("visibility-visible")})},Ss=()=>{const t=document.querySelectorAll(".card-line"),e=document.querySelectorAll(".card-table");return[...t,...e]},Ce=()=>{const t=Ss();t.length!==0&&(Z=new IntersectionObserver(ks,$s),t.forEach(e=>{Z.observe(e)}))},Le=()=>{Z==null||Z.disconnect()},bs=()=>{Fe(()=>{Ce()}),pt(()=>{Le(),Ce()}),Ke(()=>{Le()})};const ws=w({components:{ElSkeleton:Pt,ElSkeletonItem:Rt}});function Ms(t,e,s,n,r,o){const a=E("el-skeleton-item"),i=E("ElSkeleton");return h(),_("div",null,[v(i,{class:"skeleton__filter"},{template:G(()=>[v(a,{class:"skeleton__filter-item",variant:"rect"}),v(a,{class:"skeleton__filter-item",variant:"rect"}),v(a,{class:"skeleton__filter-item",variant:"rect"}),v(a,{class:"skeleton__filter-item",variant:"rect"})]),_:1}),v(i,{class:"skeleton__goods",count:10})])}const Es=x(ws,[["render",Ms]]),Is=Ve(),Cs=t=>{Is.warning(t,{timeout:5e3})};function W(t){return Array.isArray?Array.isArray(t):Qe(t)==="[object Array]"}const Ls=1/0;function As(t){if(typeof t=="string")return t;let e=t+"";return e=="0"&&1/t==-Ls?"-0":e}function Ps(t){return t==null?"":As(t)}function D(t){return typeof t=="string"}function xe(t){return typeof t=="number"}function Rs(t){return t===!0||t===!1||Ts(t)&&Qe(t)=="[object Boolean]"}function Ue(t){return typeof t=="object"}function Ts(t){return Ue(t)&&t!==null}function I(t){return t!=null}function ce(t){return!t.trim().length}function Qe(t){return t==null?t===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}const Os="Incorrect 'index' type",Ns=t=>`Invalid value for key ${t}`,Fs=t=>`Pattern length exceeds max of ${t}.`,Bs=t=>`Missing ${t} property in key`,Gs=t=>`Property 'weight' in key '${t}' must be a positive integer`,Ae=Object.prototype.hasOwnProperty;class Ds{constructor(e){this._keys=[],this._keyMap={};let s=0;e.forEach(n=>{let r=Je(n);s+=r.weight,this._keys.push(r),this._keyMap[r.id]=r,s+=r.weight}),this._keys.forEach(n=>{n.weight/=s})}get(e){return this._keyMap[e]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}}function Je(t){let e=null,s=null,n=null,r=1,o=null;if(D(t)||W(t))n=t,e=Pe(t),s=ue(t);else{if(!Ae.call(t,"name"))throw new Error(Bs("name"));const a=t.name;if(n=a,Ae.call(t,"weight")&&(r=t.weight,r<=0))throw new Error(Gs(a));e=Pe(a),s=ue(a),o=t.getFn}return{path:e,id:s,weight:r,src:n,getFn:o}}function Pe(t){return W(t)?t:t.split(".")}function ue(t){return W(t)?t.join("."):t}function Ws(t,e){let s=[],n=!1;const r=(o,a,i)=>{if(I(o))if(!a[i])s.push(o);else{let c=a[i];const l=o[c];if(!I(l))return;if(i===a.length-1&&(D(l)||xe(l)||Rs(l)))s.push(Ps(l));else if(W(l)){n=!0;for(let u=0,d=l.length;u<d;u+=1)r(l[u],a,i+1)}else a.length&&r(l,a,i+1)}};return r(t,D(e)?e.split("."):e,0),n?s:s[0]}const js={includeMatches:!1,findAllMatches:!1,minMatchCharLength:1},Vs={isCaseSensitive:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:(t,e)=>t.score===e.score?t.idx<e.idx?-1:1:t.score<e.score?-1:1},Hs={location:0,threshold:.6,distance:100},Ks={useExtendedSearch:!1,getFn:Ws,ignoreLocation:!1,ignoreFieldNorm:!1,fieldNormWeight:1};var p={...Vs,...js,...Hs,...Ks};const qs=/[^ ]+/g;function zs(t=1,e=3){const s=new Map,n=Math.pow(10,e);return{get(r){const o=r.match(qs).length;if(s.has(o))return s.get(o);const a=1/Math.pow(o,.5*t),i=parseFloat(Math.round(a*n)/n);return s.set(o,i),i},clear(){s.clear()}}}class $e{constructor({getFn:e=p.getFn,fieldNormWeight:s=p.fieldNormWeight}={}){this.norm=zs(s,3),this.getFn=e,this.isCreated=!1,this.setIndexRecords()}setSources(e=[]){this.docs=e}setIndexRecords(e=[]){this.records=e}setKeys(e=[]){this.keys=e,this._keysMap={},e.forEach((s,n)=>{this._keysMap[s.id]=n})}create(){this.isCreated||!this.docs.length||(this.isCreated=!0,D(this.docs[0])?this.docs.forEach((e,s)=>{this._addString(e,s)}):this.docs.forEach((e,s)=>{this._addObject(e,s)}),this.norm.clear())}add(e){const s=this.size();D(e)?this._addString(e,s):this._addObject(e,s)}removeAt(e){this.records.splice(e,1);for(let s=e,n=this.size();s<n;s+=1)this.records[s].i-=1}getValueForItemAtKeyId(e,s){return e[this._keysMap[s]]}size(){return this.records.length}_addString(e,s){if(!I(e)||ce(e))return;let n={v:e,i:s,n:this.norm.get(e)};this.records.push(n)}_addObject(e,s){let n={i:s,$:{}};this.keys.forEach((r,o)=>{let a=r.getFn?r.getFn(e):this.getFn(e,r.path);if(I(a)){if(W(a)){let i=[];const c=[{nestedArrIndex:-1,value:a}];for(;c.length;){const{nestedArrIndex:l,value:u}=c.pop();if(I(u))if(D(u)&&!ce(u)){let d={v:u,i:l,n:this.norm.get(u)};i.push(d)}else W(u)&&u.forEach((d,f)=>{c.push({nestedArrIndex:f,value:d})})}n.$[o]=i}else if(D(a)&&!ce(a)){let i={v:a,n:this.norm.get(a)};n.$[o]=i}}}),this.records.push(n)}toJSON(){return{keys:this.keys,records:this.records}}}function Ye(t,e,{getFn:s=p.getFn,fieldNormWeight:n=p.fieldNormWeight}={}){const r=new $e({getFn:s,fieldNormWeight:n});return r.setKeys(t.map(Je)),r.setSources(e),r.create(),r}function xs(t,{getFn:e=p.getFn,fieldNormWeight:s=p.fieldNormWeight}={}){const{keys:n,records:r}=t,o=new $e({getFn:e,fieldNormWeight:s});return o.setKeys(n),o.setIndexRecords(r),o}function te(t,{errors:e=0,currentLocation:s=0,expectedLocation:n=0,distance:r=p.distance,ignoreLocation:o=p.ignoreLocation}={}){const a=e/t.length;if(o)return a;const i=Math.abs(n-s);return r?a+i/r:i?1:a}function Us(t=[],e=p.minMatchCharLength){let s=[],n=-1,r=-1,o=0;for(let a=t.length;o<a;o+=1){let i=t[o];i&&n===-1?n=o:!i&&n!==-1&&(r=o-1,r-n+1>=e&&s.push([n,r]),n=-1)}return t[o-1]&&o-n>=e&&s.push([n,o-1]),s}const z=32;function Qs(t,e,s,{location:n=p.location,distance:r=p.distance,threshold:o=p.threshold,findAllMatches:a=p.findAllMatches,minMatchCharLength:i=p.minMatchCharLength,includeMatches:c=p.includeMatches,ignoreLocation:l=p.ignoreLocation}={}){if(e.length>z)throw new Error(Fs(z));const u=e.length,d=t.length,f=Math.max(0,Math.min(n,d));let g=o,S=f;const M=i>1||c,j=M?Array(d):[];let y;for(;(y=t.indexOf(e,S))>-1;){let R=te(e,{currentLocation:y,expectedLocation:f,distance:r,ignoreLocation:l});if(g=Math.min(R,g),S=y+u,M){let V=0;for(;V<u;)j[y+V]=1,V+=1}}S=-1;let A=[],T=1,P=u+d;const ke=1<<u-1;for(let R=0;R<u;R+=1){let V=0,H=P;for(;V<H;)te(e,{errors:R,currentLocation:f+H,expectedLocation:f,distance:r,ignoreLocation:l})<=g?V=H:P=H,H=Math.floor((P-V)/2+V);P=H;let Se=Math.max(1,f-H+1),ie=a?d:Math.min(f+H,d)+u,Q=Array(ie+2);Q[ie+1]=(1<<R)-1;for(let O=ie;O>=Se;O-=1){let ee=O-1,be=s[t.charAt(ee)];if(M&&(j[ee]=+!!be),Q[O]=(Q[O+1]<<1|1)&be,R&&(Q[O]|=(A[O+1]|A[O])<<1|1|A[O+1]),Q[O]&ke&&(T=te(e,{errors:R,currentLocation:ee,expectedLocation:f,distance:r,ignoreLocation:l}),T<=g)){if(g=T,S=ee,S<=f)break;Se=Math.max(1,2*f-S)}}if(te(e,{errors:R+1,currentLocation:f,expectedLocation:f,distance:r,ignoreLocation:l})>g)break;A=Q}const X={isMatch:S>=0,score:Math.max(.001,T)};if(M){const R=Us(j,i);R.length?c&&(X.indices=R):X.isMatch=!1}return X}function Js(t){let e={};for(let s=0,n=t.length;s<n;s+=1){const r=t.charAt(s);e[r]=(e[r]||0)|1<<n-s-1}return e}class Xe{constructor(e,{location:s=p.location,threshold:n=p.threshold,distance:r=p.distance,includeMatches:o=p.includeMatches,findAllMatches:a=p.findAllMatches,minMatchCharLength:i=p.minMatchCharLength,isCaseSensitive:c=p.isCaseSensitive,ignoreLocation:l=p.ignoreLocation}={}){if(this.options={location:s,threshold:n,distance:r,includeMatches:o,findAllMatches:a,minMatchCharLength:i,isCaseSensitive:c,ignoreLocation:l},this.pattern=c?e:e.toLowerCase(),this.chunks=[],!this.pattern.length)return;const u=(f,g)=>{this.chunks.push({pattern:f,alphabet:Js(f),startIndex:g})},d=this.pattern.length;if(d>z){let f=0;const g=d%z,S=d-g;for(;f<S;)u(this.pattern.substr(f,z),f),f+=z;if(g){const M=d-z;u(this.pattern.substr(M),M)}}else u(this.pattern,0)}searchIn(e){const{isCaseSensitive:s,includeMatches:n}=this.options;if(s||(e=e.toLowerCase()),this.pattern===e){let S={isMatch:!0,score:0};return n&&(S.indices=[[0,e.length-1]]),S}const{location:r,distance:o,threshold:a,findAllMatches:i,minMatchCharLength:c,ignoreLocation:l}=this.options;let u=[],d=0,f=!1;this.chunks.forEach(({pattern:S,alphabet:M,startIndex:j})=>{const{isMatch:y,score:A,indices:T}=Qs(e,S,M,{location:r+j,distance:o,threshold:a,findAllMatches:i,minMatchCharLength:c,includeMatches:n,ignoreLocation:l});y&&(f=!0),d+=A,y&&T&&(u=[...u,...T])});let g={isMatch:f,score:f?d/this.chunks.length:1};return f&&n&&(g.indices=u),g}}class q{constructor(e){this.pattern=e}static isMultiMatch(e){return Re(e,this.multiRegex)}static isSingleMatch(e){return Re(e,this.singleRegex)}search(){}}function Re(t,e){const s=t.match(e);return s?s[1]:null}class Ys extends q{constructor(e){super(e)}static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(e){const s=e===this.pattern;return{isMatch:s,score:s?0:1,indices:[0,this.pattern.length-1]}}}class Xs extends q{constructor(e){super(e)}static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(e){const n=e.indexOf(this.pattern)===-1;return{isMatch:n,score:n?0:1,indices:[0,e.length-1]}}}class Zs extends q{constructor(e){super(e)}static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(e){const s=e.startsWith(this.pattern);return{isMatch:s,score:s?0:1,indices:[0,this.pattern.length-1]}}}class en extends q{constructor(e){super(e)}static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(e){const s=!e.startsWith(this.pattern);return{isMatch:s,score:s?0:1,indices:[0,e.length-1]}}}class tn extends q{constructor(e){super(e)}static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(e){const s=e.endsWith(this.pattern);return{isMatch:s,score:s?0:1,indices:[e.length-this.pattern.length,e.length-1]}}}class sn extends q{constructor(e){super(e)}static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(e){const s=!e.endsWith(this.pattern);return{isMatch:s,score:s?0:1,indices:[0,e.length-1]}}}class Ze extends q{constructor(e,{location:s=p.location,threshold:n=p.threshold,distance:r=p.distance,includeMatches:o=p.includeMatches,findAllMatches:a=p.findAllMatches,minMatchCharLength:i=p.minMatchCharLength,isCaseSensitive:c=p.isCaseSensitive,ignoreLocation:l=p.ignoreLocation}={}){super(e),this._bitapSearch=new Xe(e,{location:s,threshold:n,distance:r,includeMatches:o,findAllMatches:a,minMatchCharLength:i,isCaseSensitive:c,ignoreLocation:l})}static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(e){return this._bitapSearch.searchIn(e)}}class et extends q{constructor(e){super(e)}static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(e){let s=0,n;const r=[],o=this.pattern.length;for(;(n=e.indexOf(this.pattern,s))>-1;)s=n+o,r.push([n,s-1]);const a=!!r.length;return{isMatch:a,score:a?0:1,indices:r}}}const de=[Ys,et,Zs,en,sn,tn,Xs,Ze],Te=de.length,nn=/ +(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/,rn="|";function on(t,e={}){return t.split(rn).map(s=>{let n=s.trim().split(nn).filter(o=>o&&!!o.trim()),r=[];for(let o=0,a=n.length;o<a;o+=1){const i=n[o];let c=!1,l=-1;for(;!c&&++l<Te;){const u=de[l];let d=u.isMultiMatch(i);d&&(r.push(new u(d,e)),c=!0)}if(!c)for(l=-1;++l<Te;){const u=de[l];let d=u.isSingleMatch(i);if(d){r.push(new u(d,e));break}}}return r})}const an=new Set([Ze.type,et.type]);class cn{constructor(e,{isCaseSensitive:s=p.isCaseSensitive,includeMatches:n=p.includeMatches,minMatchCharLength:r=p.minMatchCharLength,ignoreLocation:o=p.ignoreLocation,findAllMatches:a=p.findAllMatches,location:i=p.location,threshold:c=p.threshold,distance:l=p.distance}={}){this.query=null,this.options={isCaseSensitive:s,includeMatches:n,minMatchCharLength:r,findAllMatches:a,ignoreLocation:o,location:i,threshold:c,distance:l},this.pattern=s?e:e.toLowerCase(),this.query=on(this.pattern,this.options)}static condition(e,s){return s.useExtendedSearch}searchIn(e){const s=this.query;if(!s)return{isMatch:!1,score:1};const{includeMatches:n,isCaseSensitive:r}=this.options;e=r?e:e.toLowerCase();let o=0,a=[],i=0;for(let c=0,l=s.length;c<l;c+=1){const u=s[c];a.length=0,o=0;for(let d=0,f=u.length;d<f;d+=1){const g=u[d],{isMatch:S,indices:M,score:j}=g.search(e);if(S){if(o+=1,i+=j,n){const y=g.constructor.type;an.has(y)?a=[...a,...M]:a.push(M)}}else{i=0,o=0,a.length=0;break}}if(o){let d={isMatch:!0,score:i/o};return n&&(d.indices=a),d}}return{isMatch:!1,score:1}}}const he=[];function ln(...t){he.push(...t)}function pe(t,e){for(let s=0,n=he.length;s<n;s+=1){let r=he[s];if(r.condition(t,e))return new r(t,e)}return new Xe(t,e)}const ae={AND:"$and",OR:"$or"},fe={PATH:"$path",PATTERN:"$val"},ge=t=>!!(t[ae.AND]||t[ae.OR]),un=t=>!!t[fe.PATH],dn=t=>!W(t)&&Ue(t)&&!ge(t),Oe=t=>({[ae.AND]:Object.keys(t).map(e=>({[e]:t[e]}))});function tt(t,e,{auto:s=!0}={}){const n=r=>{let o=Object.keys(r);const a=un(r);if(!a&&o.length>1&&!ge(r))return n(Oe(r));if(dn(r)){const c=a?r[fe.PATH]:o[0],l=a?r[fe.PATTERN]:r[c];if(!D(l))throw new Error(Ns(c));const u={keyId:ue(c),pattern:l};return s&&(u.searcher=pe(l,e)),u}let i={children:[],operator:o[0]};return o.forEach(c=>{const l=r[c];W(l)&&l.forEach(u=>{i.children.push(n(u))})}),i};return ge(t)||(t=Oe(t)),n(t)}function hn(t,{ignoreFieldNorm:e=p.ignoreFieldNorm}){t.forEach(s=>{let n=1;s.matches.forEach(({key:r,norm:o,score:a})=>{const i=r?r.weight:null;n*=Math.pow(a===0&&i?Number.EPSILON:a,(i||1)*(e?1:o))}),s.score=n})}function pn(t,e){const s=t.matches;e.matches=[],I(s)&&s.forEach(n=>{if(!I(n.indices)||!n.indices.length)return;const{indices:r,value:o}=n;let a={indices:r,value:o};n.key&&(a.key=n.key.src),n.idx>-1&&(a.refIndex=n.idx),e.matches.push(a)})}function fn(t,e){e.score=t.score}function gn(t,e,{includeMatches:s=p.includeMatches,includeScore:n=p.includeScore}={}){const r=[];return s&&r.push(pn),n&&r.push(fn),t.map(o=>{const{idx:a}=o,i={item:e[a],refIndex:a};return r.length&&r.forEach(c=>{c(o,i)}),i})}class Y{constructor(e,s={},n){this.options={...p,...s},this.options.useExtendedSearch,this._keyStore=new Ds(this.options.keys),this.setCollection(e,n)}setCollection(e,s){if(this._docs=e,s&&!(s instanceof $e))throw new Error(Os);this._myIndex=s||Ye(this.options.keys,this._docs,{getFn:this.options.getFn,fieldNormWeight:this.options.fieldNormWeight})}add(e){I(e)&&(this._docs.push(e),this._myIndex.add(e))}remove(e=()=>!1){const s=[];for(let n=0,r=this._docs.length;n<r;n+=1){const o=this._docs[n];e(o,n)&&(this.removeAt(n),n-=1,r-=1,s.push(o))}return s}removeAt(e){this._docs.splice(e,1),this._myIndex.removeAt(e)}getIndex(){return this._myIndex}search(e,{limit:s=-1}={}){const{includeMatches:n,includeScore:r,shouldSort:o,sortFn:a,ignoreFieldNorm:i}=this.options;let c=D(e)?D(this._docs[0])?this._searchStringList(e):this._searchObjectList(e):this._searchLogical(e);return hn(c,{ignoreFieldNorm:i}),o&&c.sort(a),xe(s)&&s>-1&&(c=c.slice(0,s)),gn(c,this._docs,{includeMatches:n,includeScore:r})}_searchStringList(e){const s=pe(e,this.options),{records:n}=this._myIndex,r=[];return n.forEach(({v:o,i:a,n:i})=>{if(!I(o))return;const{isMatch:c,score:l,indices:u}=s.searchIn(o);c&&r.push({item:o,idx:a,matches:[{score:l,value:o,norm:i,indices:u}]})}),r}_searchLogical(e){const s=tt(e,this.options),n=(i,c,l)=>{if(!i.children){const{keyId:d,searcher:f}=i,g=this._findMatches({key:this._keyStore.get(d),value:this._myIndex.getValueForItemAtKeyId(c,d),searcher:f});return g&&g.length?[{idx:l,item:c,matches:g}]:[]}const u=[];for(let d=0,f=i.children.length;d<f;d+=1){const g=i.children[d],S=n(g,c,l);if(S.length)u.push(...S);else if(i.operator===ae.AND)return[]}return u},r=this._myIndex.records,o={},a=[];return r.forEach(({$:i,i:c})=>{if(I(i)){let l=n(s,i,c);l.length&&(o[c]||(o[c]={idx:c,item:i,matches:[]},a.push(o[c])),l.forEach(({matches:u})=>{o[c].matches.push(...u)}))}}),a}_searchObjectList(e){const s=pe(e,this.options),{keys:n,records:r}=this._myIndex,o=[];return r.forEach(({$:a,i})=>{if(!I(a))return;let c=[];n.forEach((l,u)=>{c.push(...this._findMatches({key:l,value:a[u],searcher:s}))}),c.length&&o.push({idx:i,item:a,matches:c})}),o}_findMatches({key:e,value:s,searcher:n}){if(!I(s))return[];let r=[];if(W(s))s.forEach(({v:o,i:a,n:i})=>{if(!I(o))return;const{isMatch:c,score:l,indices:u}=n.searchIn(o);c&&r.push({score:l,key:e,value:o,idx:a,norm:i,indices:u})});else{const{v:o,n:a}=s,{isMatch:i,score:c,indices:l}=n.searchIn(o);i&&r.push({score:c,key:e,value:o,norm:a,indices:l})}return r}}Y.version="6.6.2";Y.createIndex=Ye;Y.parseIndex=xs;Y.config=p;Y.parseQuery=tt;ln(cn);const _n={keys:["id","articul","description"]},mn=(t,e)=>new Y(t,_n).search(e).map(n=>n.item),vn=w({components:{ElInput:yt,ElIcon:ft,ElButton:gt,Search:_t},props:{data:{required:!0,type:Array}},emits:{search(t){return t},reset(){return!0}},setup(t,e){const s=b(""),n=b([]),r=ye();return{input:s,reset:()=>{s.value="",e.emit("reset")},toSearch:()=>{if(s.value.length===0)return Cs(r.t("groupSearch.notificationInputEmpty"));n.value.length===0&&(n.value=[...t.data]);const i=mn(n.value,s.value);e.emit("search",i)}}}});function yn(t,e,s,n,r,o){const a=E("Search"),i=E("ElIcon"),c=E("ElButton"),l=E("ElInput");return h(),B(l,{modelValue:t.input,"onUpdate:modelValue":e[0]||(e[0]=u=>t.input=u),size:"small",maxlength:"30",placeholder:t.$t("groupSearch.placeholder"),class:"group-search","show-word-limit":"",clearable:"",onClear:t.reset,onKeyup:Ee(t.toSearch,["enter"]),onKeydown:Ee(t.reset,["escape"])},{prefix:G(()=>[v(i,null,{default:G(()=>[v(a)]),_:1})]),append:G(()=>[v(c,{onClick:t.toSearch,disabled:!t.input},{default:G(()=>[re(k(t.$t("groupSearch.button")),1)]),_:1},8,["onClick","disabled"])]),_:1},8,["modelValue","placeholder","onClear","onKeyup","onKeydown"])}const $n=x(vn,[["render",yn]]),kn=w({components:{Filter:is},props:{headers:{require:!0,type:Array},data:{require:!0,type:Array}},emits:{filtersApply(t){return t},filtersReset(){return!0}},setup(t,e){const s=ve();return{store:s,reset:()=>{s.reset(),e.emit("filtersReset")}}}}),Sn={key:0},bn={class:"filters__header"},wn={class:"filters"},Mn={class:"filters__control",id:"filters-control"};function En(t,e,s,n,r,o){const a=E("Filter");return t.data.length?(h(),_("section",Sn,[$("h2",bn,k(t.$t("filters.header")),1),$("div",wn,[(h(!0),_(N,null,K(t.headers,(i,c)=>(h(),B(a,{key:c,filterIndex:c,header:i,data:t.data[c]},null,8,["filterIndex","header","data"]))),128))]),$("div",Mn,[ne(t.$slots,"default"),$("button",{class:"button filters__control-button",onClick:e[0]||(e[0]=(...i)=>t.reset&&t.reset(...i))},k(t.$t("filters.buttons.reset")),1),$("button",{class:"button filters__control-button",onClick:e[1]||(e[1]=i=>t.$emit("filtersApply",t.store.allSearchParams))},k(t.$t("filters.buttons.apply")),1)])])):C("",!0)}const In=x(kn,[["render",En]]),Cn={product:{require:!0,type:Object,default:()=>({})},filterHeaders:{require:!0,type:Array,default:()=>[]}},Ln=(t,e)=>t.reduce((s,n)=>{const r=`${n.stockName} - ${n.stock} ${e}`;return`${s}
${r}`},""),An=({product:t,filterHeaders:e})=>{const s=me();We().add({product:t,filterHeaders:e}),_e.ping({action:"go to page",to:s.resolve({name:"goods",params:{code:t.id}}).fullPath})},Pn={CardLineImage:qe},Rn=w({components:Pn,props:Cn,setup(t){const e=An({filterHeaders:t.filterHeaders,product:t.product});return{setTitleStock:Ln,addGoodsToStorage:e}}}),Tn={class:"card-table visibility-hide"},On={class:"card-table__section"},Nn=["title"],Fn=["title"];function Bn(t,e,s,n,r,o){var c;const a=E("CardLineImage"),i=E("RouterLink");return h(),_("article",Tn,[v(a,{img:((c=t.product)==null?void 0:c.image)??"",alt:t.product.description[0]},null,8,["img","alt"]),$("section",On,[v(i,{to:{name:"goods",params:{code:t.product.id}},onClick:t.addGoodsToStorage},{default:G(()=>[re(k(t.product.articul.trim()||"n/a"),1)]),_:1},8,["to","onClick"])]),(h(!0),_(N,null,K(t.filterHeaders,(l,u)=>(h(),_("section",{class:"card-table__section",key:u,title:t.product.description[u+1]},k(t.product.description[u+1]||"-"),9,Nn))),128)),$("section",{class:"card-table__section",title:t.setTitleStock(t.product.stock_data,t.product.pcs)},k(`${t.product.total_stock} ${t.product.pcs}`),9,Fn)])}const Gn=x(Rn,[["render",Bn]]),Dn=w({emits:{change(t){return t}},setup(t,e){const s=b(!1);return{toggle:()=>{s.value=!s.value,e.emit("change",s.value)}}}});function Wn(t,e,s,n,r,o){return h(),_("button",{class:"button filters__control-button",onClick:e[0]||(e[0]=(...a)=>t.toggle&&t.toggle(...a))},k(t.$t("toggleGroupView.button")),1)}const jn=x(Dn,[["render",Wn]]),Vn=["disabled"],Hn=w({__name:"PaginationButtonToStartComponent",setup(t){const e=L();return(s,n)=>(h(),_("button",{class:"pagination__button",disabled:m(e).isLeftButtonDisabled,onClick:n[0]||(n[0]=(...r)=>m(e).toFirst&&m(e).toFirst(...r))},k(s.$t("pagination.toStart")),9,Vn))}}),Kn=["disabled"],qn=w({__name:"PaginationButtonToLeft",setup(t){const e=L();return(s,n)=>(h(),_("button",{class:"pagination__button",disabled:m(e).isLeftButtonDisabled,onClick:n[0]||(n[0]=(...r)=>m(e).moveLeft&&m(e).moveLeft(...r))}," ❮ ",8,Kn))}}),zn=["onClick"],xn=w({__name:"PaginationButton",setup(t){const e=L();return(s,n)=>(h(!0),_(N,null,K(m(e).whichButtonsDisplayed,r=>(h(),_("button",{class:se(["pagination__button",{"active-button":r===m(e).activePage}]),key:r,onClick:o=>m(e).setActive(r)},k(r),11,zn))),128))}});const Un=["disabled"],Qn=w({__name:"PaginationButtonToRight",setup(t){const e=L();return(s,n)=>(h(),_("button",{class:"pagination__button",disabled:m(e).isRightButtonDisabled,onClick:n[0]||(n[0]=(...r)=>m(e).moveRight&&m(e).moveRight(...r))}," ❯ ",8,Un))}}),Jn=["disabled"],Yn=w({__name:"PaginationButtonToEndComponent",setup(t){const e=L();return(s,n)=>(h(),_("button",{class:"pagination__button",disabled:m(e).isRightButtonDisabled,onClick:n[0]||(n[0]=(...r)=>m(e).toLast&&m(e).toLast(...r))},k(s.$t("pagination.toEnd")),9,Jn))}}),Xn={id:"pagination-quantity",class:"pagination__quantity"},Zn=["value","selected","onClick"],er=w({__name:"PaginationQuantityComponent",setup(t){const e=L();return(s,n)=>(h(),_("select",Xn,[(h(!0),_(N,null,K(m(e).quantity,r=>(h(),_("option",{class:"pagination__quantity-option",key:r,value:r,selected:r===m(e).onPage,onClick:o=>m(e).setOnPage(r)},k(r),9,Zn))),128))]))}});const tr={key:0,class:"pagination"},Ne=w({__name:"PaginationItemComponent",setup(t){const e=L();return(s,n)=>m(e).length?(h(),_("section",tr,[v(Hn),v(qn),v(xn),v(Qn),v(Yn),v(er)])):C("",!0)}}),sr=w({__name:"PaginationComponent",props:{length:{},hide:{type:Boolean}},setup(t){const e=t,s=L();return J(e,n=>s.setLength(n.length)),(n,r)=>(h(),_(N,null,[n.hide?(h(),B(Ne,{key:0})):C("",!0),ne(n.$slots,"default"),n.hide?(h(),B(Ne,{key:1})):C("",!0)],64))}});const nr={class:"error-in-group"},rr={class:"error-in-group__message"},or=w({__name:"ErrorMessageInGroup",props:{errorMessage:{}},setup(t){return(e,s)=>(h(),_("div",nr,[$("h2",rr,k(e.errorMessage)+" ☹",1)]))}});const ar={SkeletonGroup:Es,Pagination:sr,CardLine:jt,ErrorMessageInGroup:or,Filters:In,GroupSearch:$n,CardTable:Gn,ToggleGroupView:jn},ir=w({components:ar,setup(){const t=U(),{allDataToShow:e,allFilters:s,filterHeaders:n}=_s(),{toShow:r}=hs(e),{allDataToShowLength:o}=ps(e),{searchShow:a,searchReset:i}=us(e),{isEmpty:c}=vs(o),{view:l,toggleView:u}=ys(["CardLine","CardTable"]);return ds(l),bs(),ms(),{store:t,filterHeaders:n,allFilters:s,getFilteredGoods:cs,resetGoods:ze,allDataToShow:e,allDataToShowLength:o,isEmpty:c,toShow:r,searchShow:a,searchReset:i,view:l,toggleView:u}}}),cr={class:"group"},lr={key:1},ur={key:0,class:"group__products"};function dr(t,e,s,n,r,o){const a=E("SkeletonGroup"),i=E("GroupSearch"),c=E("ToggleGroupView"),l=E("Filters"),u=E("Pagination"),d=E("ErrorMessageInGroup");return h(),_("div",cr,[t.store.isLoading?(h(),B(a,{key:0})):C("",!0),!t.store.isLoading&&!t.store.isError?(h(),_("div",lr,[v(l,{headers:t.filterHeaders,data:t.allFilters,onFiltersApply:t.getFilteredGoods,onFiltersReset:t.resetGoods},{default:G(()=>[v(i,{data:t.allDataToShow,onSearch:t.searchShow,onReset:t.searchReset},null,8,["data","onSearch","onReset"]),v(c,{onChange:t.toggleView},null,8,["onChange"])]),_:1},8,["headers","data","onFiltersApply","onFiltersReset"]),v(u,{length:t.allDataToShowLength,hide:t.view==="CardLine"},{default:G(()=>[t.isEmpty?C("",!0):(h(),_("section",ur,[(h(!0),_(N,null,K(t.toShow,(f,g)=>(h(),B(mt(t.view),{key:g,product:f,filterHeaders:t.filterHeaders},null,8,["product","filterHeaders"]))),128))]))]),_:1},8,["length","hide"])])):C("",!0),!t.store.isLoading&&t.store.isError?(h(),B(d,{key:2,errorMessage:t.store.isError},null,8,["errorMessage"])):C("",!0),!t.store.isLoading&&!t.store.isError&&t.isEmpty?(h(),B(d,{key:3,errorMessage:t.$t("group.error.empty")},null,8,["errorMessage"])):C("",!0)])}const $r=x(ir,[["render",dr]]);export{$r as default};
